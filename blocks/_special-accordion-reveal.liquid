{% liquid
  assign slot = block.settings.slot | default: 'left'
  assign layout = block.settings.layout_preset | default: 'none'

  capture manual_children
    {% content_for 'blocks' %}
  endcapture

  capture preset_output
    {% case layout %}
      {% when 'editorial' %}
        {% render 'special-accordion-preset-editorial', settings: block.settings, slot: slot, block: block %}
      {% when 'image_with_text' %}
        {% render 'special-accordion-preset-image-with-text', settings: block.settings, slot: slot, block: block %}
      {% when 'pull_quote' %}
        {% render 'special-accordion-preset-pull-quote', settings: block.settings, slot: slot %}
      {% when 'video' %}
        {% render 'special-accordion-preset-video', settings: block.settings, slot: slot, block: block %}
      {% when 'split_section' %}
        {% render 'special-accordion-preset-split', settings: block.settings, slot: slot %}
      {% when 'hero_bottom_aligned' %}
        {% render 'special-accordion-preset-hero-bottom', settings: block.settings, slot: slot %}
      {% when 'slideshow' %}
        {% render 'special-accordion-preset-slideshow', settings: block.settings, slot: slot %}
      {% when 'icons_with_text' %}
        {% render 'special-accordion-preset-icons-with-text', settings: block.settings, slot: slot %}
      {% when 'marquee' %}
        {% render 'special-accordion-preset-marquee', settings: block.settings, slot: slot %}
      {% else %}
    {% endcase %}
  endcapture

  assign manual_children = manual_children | strip
  assign preset_output = preset_output | strip
  assign is_empty = true
  if preset_output != blank or manual_children != blank
    assign is_empty = false
  endif
%}

<div
  class="special-row__reveal special-row__reveal--{{ slot }}"
  data-slot="{{ slot }}"
  data-layout="{{ layout }}"
  data-empty="{{ is_empty }}"
  {{ block.shopify_attributes }}
>
  <div class="special-row__reveal-inner">
    {{ preset_output }}

    {% if manual_children != blank %}
      <div class="special-row__manual-blocks special-row__manual-blocks--{{ slot }}">
        {{ manual_children }}
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Special reveal",
  "tag": null,
  "settings": [
    {
      "type": "select",
      "id": "slot",
      "label": "Reveal slot",
      "options": [
        {
          "value": "left",
          "label": "Left heading"
        },
        {
          "value": "right",
          "label": "Right heading"
        }
      ],
      "default": "left",
      "info": "Assigns this reveal to the left or right trigger."
    },
    {
      "type": "paragraph",
      "content": "Add blocks here to build what shows when this heading is clicked. Drag in any theme block (text, image, buttons, etc.) to recreate existing layouts."
    },
    {
      "type": "select",
      "id": "layout_preset",
      "label": "Layout preset",
      "options": [
        {
          "value": "none",
          "label": "Custom blocks"
        },
        {
          "value": "editorial",
          "label": "Editorial"
        },
        {
          "value": "image_with_text",
          "label": "Image with text"
        },
        {
          "value": "pull_quote",
          "label": "Pull quote"
        },
        {
          "value": "video",
          "label": "Video"
        },
        {
          "value": "split_section",
          "label": "Split section"
        },
        {
          "value": "hero_bottom_aligned",
          "label": "Hero: Bottom aligned"
        },
        {
          "value": "slideshow",
          "label": "Slideshow"
        },
        {
          "value": "icons_with_text",
          "label": "Icons with text"
        },
        {
          "value": "marquee",
          "label": "Marquee"
        }
      ],
      "default": "none"
    },
    {
      "type": "header",
      "content": "Editorial"
    },
    {
      "type": "image_picker",
      "id": "editorial_image",
      "label": "Image",
      "visible_if": "{{ block.settings.layout_preset == 'editorial' }}"
    },
    {
      "type": "text",
      "id": "editorial_caption",
      "label": "Caption",
      "visible_if": "{{ block.settings.layout_preset == 'editorial' }}"
    },
    {
      "type": "text",
      "id": "editorial_heading",
      "label": "Heading",
      "visible_if": "{{ block.settings.layout_preset == 'editorial' }}"
    },
    {
      "type": "inline_richtext",
      "id": "editorial_content",
      "label": "Text",
      "visible_if": "{{ block.settings.layout_preset == 'editorial' }}"
    },
    {
      "type": "text",
      "id": "editorial_button_label",
      "label": "Button label",
      "visible_if": "{{ block.settings.layout_preset == 'editorial' }}"
    },
    {
      "type": "url",
      "id": "editorial_button_link",
      "label": "Button link",
      "visible_if": "{{ block.settings.layout_preset == 'editorial' }}"
    },
    {
      "type": "header",
      "content": "Image with text"
    },
    {
      "type": "image_picker",
      "id": "iwt_image",
      "label": "Image",
      "visible_if": "{{ block.settings.layout_preset == 'image_with_text' }}"
    },
    {
      "type": "select",
      "id": "iwt_image_position",
      "label": "Image position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left",
      "visible_if": "{{ block.settings.layout_preset == 'image_with_text' }}"
    },
    {
      "type": "text",
      "id": "iwt_heading",
      "label": "Heading",
      "visible_if": "{{ block.settings.layout_preset == 'image_with_text' }}"
    },
    {
      "type": "inline_richtext",
      "id": "iwt_text",
      "label": "Body",
      "visible_if": "{{ block.settings.layout_preset == 'image_with_text' }}"
    },
    {
      "type": "text",
      "id": "iwt_button_label",
      "label": "Button label",
      "visible_if": "{{ block.settings.layout_preset == 'image_with_text' }}"
    },
    {
      "type": "url",
      "id": "iwt_button_link",
      "label": "Button link",
      "visible_if": "{{ block.settings.layout_preset == 'image_with_text' }}"
    }
    {
      "type": "header",
      "content": "Pull quote"
    },
    {
      "type": "inline_richtext",
      "id": "pull_quote_text",
      "label": "Quote text",
      "default": "Add an impactful headline or testimonial here.",
      "visible_if": "{{ block.settings.layout_preset == 'pull_quote' }}"
    },
    {
      "type": "text",
      "id": "pull_quote_attribution",
      "label": "Attribution",
      "visible_if": "{{ block.settings.layout_preset == 'pull_quote' }}"
    },
    {
      "type": "text",
      "id": "pull_quote_button_label",
      "label": "Button label",
      "visible_if": "{{ block.settings.layout_preset == 'pull_quote' }}"
    },
    {
      "type": "url",
      "id": "pull_quote_button_link",
      "label": "Button link",
      "visible_if": "{{ block.settings.layout_preset == 'pull_quote' }}"
    },
    {
      "type": "header",
      "content": "Video"
    },
    {
      "type": "select",
      "id": "video_source",
      "label": "Video source",
      "options": [
        {
          "value": "uploaded",
          "label": "Uploaded video"
        },
        {
          "value": "url",
          "label": "YouTube or Vimeo"
        }
      ],
      "default": "uploaded",
      "visible_if": "{{ block.settings.layout_preset == 'video' }}"
    },
    {
      "type": "video",
      "id": "video_file",
      "label": "Video",
      "visible_if": "{{ block.settings.layout_preset == 'video' and block.settings.video_source == 'uploaded' }}"
    },
    {
      "type": "video_url",
      "id": "video_url",
      "label": "Video URL",
      "info": "Supports YouTube or Vimeo links.",
      "visible_if": "{{ block.settings.layout_preset == 'video' and block.settings.video_source == 'url' }}"
    },
    {
      "type": "image_picker",
      "id": "video_cover_image",
      "label": "Poster image",
      "visible_if": "{{ block.settings.layout_preset == 'video' and block.settings.video_source == 'url' }}"
    },
    {
      "type": "text",
      "id": "video_alt",
      "label": "Video alt text",
      "visible_if": "{{ block.settings.layout_preset == 'video' }}"
    },
    {
      "type": "checkbox",
      "id": "video_autoplay",
      "label": "Enable autoplay",
      "default": false,
      "visible_if": "{{ block.settings.layout_preset == 'video' }}"
    },
    {
      "type": "checkbox",
      "id": "video_loop",
      "label": "Loop video",
      "default": true,
      "visible_if": "{{ block.settings.layout_preset == 'video' }}"
    },
    {
      "type": "header",
      "content": "Split section"
    },
    {
      "type": "image_picker",
      "id": "split_left_image",
      "label": "Left media",
      "visible_if": "{{ block.settings.layout_preset == 'split_section' }}"
    },
    {
      "type": "text",
      "id": "split_left_heading",
      "label": "Left heading",
      "visible_if": "{{ block.settings.layout_preset == 'split_section' }}"
    },
    {
      "type": "inline_richtext",
      "id": "split_left_text",
      "label": "Left body",
      "visible_if": "{{ block.settings.layout_preset == 'split_section' }}"
    },
    {
      "type": "text",
      "id": "split_left_button_label",
      "label": "Left button label",
      "visible_if": "{{ block.settings.layout_preset == 'split_section' }}"
    },
    {
      "type": "url",
      "id": "split_left_button_link",
      "label": "Left button link",
      "visible_if": "{{ block.settings.layout_preset == 'split_section' }}"
    },
    {
      "type": "image_picker",
      "id": "split_right_image",
      "label": "Right media",
      "visible_if": "{{ block.settings.layout_preset == 'split_section' }}"
    },
    {
      "type": "text",
      "id": "split_right_heading",
      "label": "Right heading",
      "visible_if": "{{ block.settings.layout_preset == 'split_section' }}"
    },
    {
      "type": "inline_richtext",
      "id": "split_right_text",
      "label": "Right body",
      "visible_if": "{{ block.settings.layout_preset == 'split_section' }}"
    },
    {
      "type": "text",
      "id": "split_right_button_label",
      "label": "Right button label",
      "visible_if": "{{ block.settings.layout_preset == 'split_section' }}"
    },
    {
      "type": "url",
      "id": "split_right_button_link",
      "label": "Right button link",
      "visible_if": "{{ block.settings.layout_preset == 'split_section' }}"
    },
    {
      "type": "header",
      "content": "Hero â€“ bottom aligned"
    },
    {
      "type": "image_picker",
      "id": "hero_background_image",
      "label": "Background image",
      "visible_if": "{{ block.settings.layout_preset == 'hero_bottom_aligned' }}"
    },
    {
      "type": "inline_richtext",
      "id": "hero_kicker",
      "label": "Eyebrow",
      "visible_if": "{{ block.settings.layout_preset == 'hero_bottom_aligned' }}"
    },
    {
      "type": "text",
      "id": "hero_heading",
      "label": "Heading",
      "visible_if": "{{ block.settings.layout_preset == 'hero_bottom_aligned' }}"
    },
    {
      "type": "inline_richtext",
      "id": "hero_text",
      "label": "Supporting text",
      "visible_if": "{{ block.settings.layout_preset == 'hero_bottom_aligned' }}"
    },
    {
      "type": "text",
      "id": "hero_button_label",
      "label": "Button label",
      "visible_if": "{{ block.settings.layout_preset == 'hero_bottom_aligned' }}"
    },
    {
      "type": "url",
      "id": "hero_button_link",
      "label": "Button link",
      "visible_if": "{{ block.settings.layout_preset == 'hero_bottom_aligned' }}"
    },
    {
      "type": "header",
      "content": "Slideshow"
    },
    {
      "type": "checkbox",
      "id": "slideshow_autoplay",
      "label": "Autoplay slides",
      "default": false,
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "range",
      "id": "slideshow_autoplay_speed",
      "label": "Autoplay speed (seconds)",
      "min": 3,
      "max": 7,
      "step": 1,
      "default": 4,
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' and block.settings.slideshow_autoplay }}"
    },
    {
      "type": "select",
      "id": "slideshow_height",
      "label": "Slide height",
      "options": [
        {
          "value": "auto",
          "label": "Auto"
        },
        {
          "value": "small",
          "label": "Small"
        },
        {
          "value": "medium",
          "label": "Medium"
        },
        {
          "value": "large",
          "label": "Large"
        }
      ],
      "default": "medium",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "header",
      "content": "Slide 1",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "image_picker",
      "id": "slideshow_slide_one_image",
      "label": "Image",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "text",
      "id": "slideshow_slide_one_heading",
      "label": "Heading",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "inline_richtext",
      "id": "slideshow_slide_one_text",
      "label": "Body",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "text",
      "id": "slideshow_slide_one_button_label",
      "label": "Button label",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "url",
      "id": "slideshow_slide_one_button_link",
      "label": "Button link",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "header",
      "content": "Slide 2",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "image_picker",
      "id": "slideshow_slide_two_image",
      "label": "Image",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "text",
      "id": "slideshow_slide_two_heading",
      "label": "Heading",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "inline_richtext",
      "id": "slideshow_slide_two_text",
      "label": "Body",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "text",
      "id": "slideshow_slide_two_button_label",
      "label": "Button label",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "url",
      "id": "slideshow_slide_two_button_link",
      "label": "Button link",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "header",
      "content": "Slide 3",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "image_picker",
      "id": "slideshow_slide_three_image",
      "label": "Image",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "text",
      "id": "slideshow_slide_three_heading",
      "label": "Heading",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "inline_richtext",
      "id": "slideshow_slide_three_text",
      "label": "Body",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "text",
      "id": "slideshow_slide_three_button_label",
      "label": "Button label",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "url",
      "id": "slideshow_slide_three_button_link",
      "label": "Button link",
      "visible_if": "{{ block.settings.layout_preset == 'slideshow' }}"
    },
    {
      "type": "header",
      "content": "Icons with text"
    },
    {
      "type": "range",
      "id": "icons_per_row",
      "label": "Items per row",
      "min": 2,
      "max": 4,
      "step": 1,
      "default": 3,
      "visible_if": "{{ block.settings.layout_preset == 'icons_with_text' }}"
    },
    {
      "type": "image_picker",
      "id": "icons_item_one_image",
      "label": "Icon 1",
      "visible_if": "{{ block.settings.layout_preset == 'icons_with_text' }}"
    },
    {
      "type": "text",
      "id": "icons_item_one_heading",
      "label": "Heading 1",
      "visible_if": "{{ block.settings.layout_preset == 'icons_with_text' }}"
    },
    {
      "type": "inline_richtext",
      "id": "icons_item_one_text",
      "label": "Body 1",
      "visible_if": "{{ block.settings.layout_preset == 'icons_with_text' }}"
    },
    {
      "type": "image_picker",
      "id": "icons_item_two_image",
      "label": "Icon 2",
      "visible_if": "{{ block.settings.layout_preset == 'icons_with_text' }}"
    },
    {
      "type": "text",
      "id": "icons_item_two_heading",
      "label": "Heading 2",
      "visible_if": "{{ block.settings.layout_preset == 'icons_with_text' }}"
    },
    {
      "type": "inline_richtext",
      "id": "icons_item_two_text",
      "label": "Body 2",
      "visible_if": "{{ block.settings.layout_preset == 'icons_with_text' }}"
    },
    {
      "type": "image_picker",
      "id": "icons_item_three_image",
      "label": "Icon 3",
      "visible_if": "{{ block.settings.layout_preset == 'icons_with_text' }}"
    },
    {
      "type": "text",
      "id": "icons_item_three_heading",
      "label": "Heading 3",
      "visible_if": "{{ block.settings.layout_preset == 'icons_with_text' }}"
    },
    {
      "type": "inline_richtext",
      "id": "icons_item_three_text",
      "label": "Body 3",
      "visible_if": "{{ block.settings.layout_preset == 'icons_with_text' }}"
    },
    {
      "type": "image_picker",
      "id": "icons_item_four_image",
      "label": "Icon 4",
      "visible_if": "{{ block.settings.layout_preset == 'icons_with_text' }}"
    },
    {
      "type": "text",
      "id": "icons_item_four_heading",
      "label": "Heading 4",
      "visible_if": "{{ block.settings.layout_preset == 'icons_with_text' }}"
    },
    {
      "type": "inline_richtext",
      "id": "icons_item_four_text",
      "label": "Body 4",
      "visible_if": "{{ block.settings.layout_preset == 'icons_with_text' }}"
    },
    {
      "type": "header",
      "content": "Marquee"
    },
    {
      "type": "textarea",
      "id": "marquee_lines",
      "label": "Items (one per line)",
      "default": "First message\nSecond message\nThird message",
      "visible_if": "{{ block.settings.layout_preset == 'marquee' }}"
    },
    {
      "type": "select",
      "id": "marquee_direction",
      "label": "Direction",
      "options": [
        {
          "value": "normal",
          "label": "Left to right"
        },
        {
          "value": "reverse",
          "label": "Right to left"
        }
      ],
      "default": "normal",
      "visible_if": "{{ block.settings.layout_preset == 'marquee' }}"
    },
    {
      "type": "range",
      "id": "marquee_gap",
      "label": "Gap",
      "min": 4,
      "max": 80,
      "step": 4,
      "unit": "px",
      "default": 24,
      "visible_if": "{{ block.settings.layout_preset == 'marquee' }}"
    }
  ],
  "blocks": [
    {
      "type": "@theme"
    },
    {
      "type": "@app"
    },
    {
      "type": "_divider"
    }
  ]
}
{% endschema %}
